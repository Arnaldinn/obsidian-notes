
A enumera√ß√£o do **Active Directory (AD)** √© uma etapa essencial em pentests internos, pois permite identificar:

- usu√°rios do dom√≠nio  
- grupos  
- permiss√µes  
- pol√≠ticas  
- alvos valiosos para movimento lateral  
- contas com privil√©gio administrativo  

Nesta etapa usamos principalmente a ferramenta **rpcclient**, parte do pacote **Samba**, para consultar o dom√≠nio via SMB/RPC **sem precisar de privil√©gios elevados**.

---

# üñ•Ô∏è O que √© o Active Directory (explica√ß√£o simples)

O **Active Directory** √© o sistema de gerenciamento centralizado da Microsoft para:

- usu√°rios  
- computadores  
- grupos  
- permiss√µes  
- pol√≠ticas (GPOs)  

Ele organiza tudo isso dentro de um ‚Äúdom√≠nio‚Äù, permitindo que uma √∫nica conta funcione em v√°rias m√°quinas.

Como √© altamente integrado com Windows, o AD revela muita informa√ß√£o por padr√£o ‚Äî ideal para enumera√ß√£o.

---

# üîß O que √© o rpcclient?

`rpcclient` √© uma ferramenta usada para interagir com servi√ßos RPC em m√°quinas Windows via protocolo **SMB**.

Ele permite, mesmo sem ser administrador:

- listar usu√°rios  
- listar grupos  
- descobrir RIDs  
- ver membros de grupos  
- consultar atributos de contas  

√â √≥timo quando voc√™ j√° tem **uma credencial v√°lida**, mesmo que comum.

---

# üõ†Ô∏è Autentica√ß√£o com rpcclient

Exemplo de conex√£o:

```
‚îÄ$ rpcclient -W orionscorp2 -U rlourdes 172.16.1.243
```

-W : organiza√ß√£o que o IP pertence 
-U : O Usu√°rio

Comandos que sao bom utilizar quando tiver o acesso no **rpcclient**:

```
enumdomusers
```
Isso retorna todos os usu√°rios do dom√≠nio.

```
queryuser <RID_DO_USUARIO>
```
Mostra detalhes do usu√°rio **RID 500** (Administrator).

```
enumdomgroups
```
Isso mostra todos os grupos do Active Directory.

```
querygroup <RID_DO_GRUPO>
```
Descobre quais usu√°rios pertencem a um grupo espec√≠fico.

```
querygroupmem
```
Mostra os membros que est√£o no grupo 
